---
depends:
  - devtools.pi

actions:
  # clean links before recreating them
  - action: command.run
    command: rm
    where: os.name == "linux" || os.name == "macos"
    args:
      - -rf
      - "{{ user.home_dir }}/.pi/agent/{prompts,skills,agents,AGENTS.md}"

  - action: file.link
    to: "{{user.home_dir}}/.pi/agent/prompts"
    from: commands
    
  - action: file.link
    to: "{{user.home_dir}}/.pi/agent/skills"
    from: skills

  - action: file.link
    to: "{{user.home_dir}}/.pi/agent/agents"
    from: agents

  - action: file.link
    to: "{{user.home_dir}}/.pi/agent/AGENT.md"
    from: AGENTS.md
